<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#fde2e4">
  <meta name="description" content="A gentle care site to help you rest, hydrate, and feel better.">
  <title>Crush Care Center</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <link rel="icon"
    href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 128 128'%3E%3Cpath fill='%23ff5c8a' d='M64 116s-7.8-6.5-19-16C32 90 16 76 16 56c0-14.4 11.6-26 26-26 9.8 0 18.3 5.6 22 13.8C67.7 35.6 76.2 30 86 30c14.4 0 26 11.6 26 26 0 20-16 34-29 44-11.2 9.5-19 16-19 16z'/%3E%3C/svg%3E">
</head>
<body>
  <div class="bg"></div>
  <header class="site-header" role="banner">
    <div class="container">
      <h1 class="title">Hey, Pookie Ji. Aaiye ðŸ’–</h1>
      <p class="subtitle" id="greeting">Gentle rest, sips of water, and a little love.</p>
      <p>Saari activities save ho jayegi. Anmol ko sabh pata chalte rahega. Daily website pe aana hai.</p>
    </div>
  </header>

  <main id="main" class="container" role="main">
    <section class="cards" aria-label="Care tools">
      <article class="card" aria-labelledby="hydrate-title">
        <div class="card-head">
          <h2 id="hydrate-title">Hydration Center</h2>
          <span class="chip">PAANI PEEO!</span>
        </div>
        <p class="card-sub">Water is way to better Health. Ab paani pee le</p>
        <div class="progress" aria-label="Daily hydration progress">
          <div id="water-progress" class="progress-bar" style="width:0%" aria-valuemin="0" aria-valuemax="100"
            aria-valuenow="0"></div>
        </div>
        <br>
        <div class="hydration-controls">
          <button id="add-small" class="btn" aria-label="Add small sip (100 ml)">+100 ml</button>
          <button id="add-medium" class="btn" aria-label="Add cup (250 ml)">+250 ml</button>
          <button id="add-large" class="btn" aria-label="Add bottle (500 ml)">+500 ml</button>
          <button id="reset-water" class="btn ghost" aria-label="Reset today">Reset</button>
        </div>
        <p class="muted" id="water-stats">0 / 2000 ml</p>
      </article>

      <article><div data-tf-live="01K3H62FBZHX2PPV2K7ZGSF2GG"></div><script src="//embed.typeform.com/next/embed.js"></script></article>

      <article class="card" aria-labelledby="rest-title">
        <div class="card-head">
          <h2 id="rest-title">Breathe Timer</h2>
          <span class="chip sunset">Just breathe.</span>
        </div>
        <p class="card-sub">Timer set kar, aur saas le. I bet tujhe achha<br>lagega</p>
        <div class="timer" aria-live="polite">
          <div id="timer-display" class="timer-display">20:00</div>
        </div>
        <div class="timer-controls">
          <button data-min="10" class="btn ghost">10 Minutes</button>
          <button data-min="20" class="btn ghost">20 Minutes</button>
          <button data-min="30" class="btn ghost">30 Minutes</button>
        </div><br>
        <div class="timer-actions">
          <button id="timer-start" class="btn">Start</button>
          <button id="timer-pause" class="btn ghost">Pause</button>
          <button id="timer-reset" class="btn ghost">Reset</button>
        </div>
        <p class="muted">Tip: Lights band kar, Timer laga aur saas le.</p>
      </article>
    </section>

    <section class="tips" aria-label="Care tips">
      <h2>Tested Tips by Anmol</h2>
      <ul>
        <li>Ab kuchh bhi thanda mat khana (especially Ice Cream).</li>
        <li>Garm Paani aur Herbal Tea tere dost hi hai.</li>
        <li>Blanket, AC off and Hot Environment. Sweat will make you feel better.</li>
        <li>Agar tabiyat bigde, DOCTOR!!</li>
        <li>Can contect me anywhere.</li>
        <ul>
          <li>anmoltiwari9959@gmail.com</li>
          <li>9699850615</li>
          <li>GIGAC0DER on Github</li>
          <li>@m0ltrix</li>
        </ul>
      </ul>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <p>Sun. Mai tera ek aisa dost hu, jise tu kuchh bhi<br>Litterally kuchh bhi bata sakti hai. ðŸ’–</p>
    </div>
  </footer>

  <style>
    :root {
      --bg-1: #fff5f7;
      --bg-2: #f3f0ff;
      --bg-3: #eefaf4;
      --text: #2a2a2a;
      --muted: #6b7280;
      --primary: #ff6b9a;
      --primary-600: #ff5c8a;
      --calm: #5fb3a2;
      --sunset: #f59e0b;
      --card: #ffffffcc;
      --shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
      --radius: 18px;
    }

    * {
      box-sizing: border-box;
    }

    html,
    body {
      height: 100%;
    }

    body {
      margin: 0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      line-height: 1.6;
      background: linear-gradient(135deg, var(--bg-1), var(--bg-2) 50%, var(--bg-3));
      background-attachment: fixed;
    }

    .bg {
      position: fixed;
      inset: 0;
      background: radial-gradient(600px 300px at 10% 0%, rgba(255, 204, 229, 0.5), transparent 60%),
        radial-gradient(600px 300px at 90% 20%, rgba(197, 202, 255, 0.5), transparent 60%),
        radial-gradient(600px 300px at 30% 90%, rgba(141, 214, 190, 0.5), transparent 60%);
      pointer-events: none;
    }

    label {
      border-radius: 20px;
    }

    .container {
      width: min(100%, 1100px);
      margin: 0 auto;
      padding: 24px;
    }

    .site-header {
      padding: 36px 0 8px;
    }

    .title {
      margin: 0 0 6px;
      font-size: clamp(28px, 3.5vw, 42px);
      font-weight: 800;
      letter-spacing: -0.02em;
    }

    .subtitle {
      margin: 0;
      color: var(--muted);
    }

    .cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(270px, 1fr));
      gap: 18px;
    }

    .card {
      background: var(--card);
      backdrop-filter: blur(8px);
      border-radius: var(--radius);
      padding: 18px;
      box-shadow: var(--shadow);
      border: 1px solid rgba(255, 255, 255, 0.6);
    }

    .card-head {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }

    .card h2 {
      margin: 0;
      font-size: 20px;
    }

    .card-sub {
      margin: 8px 0 12px;
      color: var(--muted);
    }

    .chip {
      display: inline-block;
      padding: 6px 10px;
      border-radius: 999px;
      background: #ffe4ec;
      color: var(--primary-600);
      font-weight: 600;
      font-size: 12px;
    }

    .chip.calm {
      background: #e6faf4;
      color: var(--calm);
    }

    .chip.sunset {
      background: #fff1db;
      color: var(--sunset);
    }

    .btn {
      appearance: none;
      border: none;
      background: var(--primary);
      color: white;
      padding: 10px 14px;
      border-radius: 12px;
      font-weight: 700;
      cursor: pointer;
      transition: transform 0.05s ease, box-shadow 0.2s ease, background 0.2s ease;
      box-shadow: 0 6px 16px rgba(255, 92, 138, 0.25);
    }

    .btn:hover {
      transform: translateY(-1px);
    }

    .btn:active {
      transform: translateY(0);
    }

    .btn.ghost {
      background: transparent;
      color: var(--primary-600);
      border: 1px solid #ffd1e1;
      box-shadow: none;
    }

    .muted {
      color: var(--muted);
      font-size: 14px;
    }

    .hydration-controls {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .progress {
      width: 100%;
      height: 12px;
      background: #f0f0f5;
      border-radius: 999px;
      overflow: hidden;
      border: 1px solid rgba(0, 0, 0, 0.05);
    }

    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, #ff9ac0, #ff5c8a);
      width: 0%;
      transition: width 0.3s ease;
    }

    .symptoms {
      display: grid;
      gap: 10px;
    }

    .check {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .symptoms textarea {
      resize: vertical;
      border-radius: 12px;
      border: 1px solid #e5e7eb;
      padding: 10px 12px;
      font-family: inherit;
    }

    .row {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .saved {
      color: #16a34a;
      font-weight: 700;
    }

    .timer {
      display: grid;
      place-items: center;
      margin: 12px 0;
    }

    .timer-display {
      font-size: 40px;
      font-weight: 800;
      letter-spacing: 2px;
    }

    .timer-controls,
    .timer-actions {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .tips {
      margin: 28px 0 40px;
      background: var(--card);
      border: 1px solid rgba(255, 255, 255, 0.6);
      border-radius: var(--radius);
      padding: 18px;
      box-shadow: var(--shadow);
    }

    .tips h2 {
      margin-top: 0;
    }

    .tips ul {
      margin: 0;
      padding-left: 20px;
    }

    .site-footer {
      text-align: center;
      color: var(--muted);
      padding-bottom: 28px;
    }

    .submit-section {
      margin: 40px 0;
      text-align: center;
      background: var(--card);
      border: 1px solid rgba(255, 255, 255, 0.6);
      border-radius: var(--radius);
      padding: 24px;
      box-shadow: var(--shadow);
    }

    .submit-section h2 {
      margin-top: 0;
      color: var(--primary-600);
    }

    .submit-btn {
      background: var(--primary-600);
      font-size: 18px;
      padding: 16px 32px;
      border-radius: 16px;
      box-shadow: 0 8px 24px rgba(255, 92, 138, 0.3);
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --text: #f7f7f8;
        --muted: #a1a1aa;
        --card: #0f1115cc;
      }

      body {
        background: linear-gradient(135deg, #241b22, #1f2230 50%, #17241f);
      }

      .progress {
        background: #272a34;
        border-color: rgba(255, 255, 255, 0.12);
      }

      .symptoms textarea {
        background: #0f1115;
        color: var(--text);
        border-color: #2a2d3a;
      }

      .btn.ghost {
        border-color: #3b2a33;
      }
    }
  </style>

  <script src="https://cdn.emailjs.com/sdk/3.11.0/email.min.js"></script>
  <script>
    (function () {
      emailjs.init("nUM_2_eXOQnZh_XsW"); // Make sure this is your actual Public Key from EmailJS dashboard
    })();

    async function sendEmail(templateId, templateParams) {
      try {
        const response = await emailjs.send("service_0c4fjcl", templateId, templateParams);
        console.log("EmailJS Response:", response);
        return { success: true };
      } catch (error) {
        console.error("Failed to send email:", error);
        return { success: false, error };
      }
    }
  </script>

  <script>
    // Your existing JS code for hydration, symptoms, timer, etc.
    // Only email sending part was adjusted
    (() => {
      const WATER_GOAL_ML = 2000;
      const waterProgress = document.getElementById('water-progress');
      const waterStats = document.getElementById('water-stats');
      const greeting = document.getElementById('greeting');

      const symptomForm = document.getElementById('symptom-form');

      const timerDisplay = document.getElementById('timer-display');
      const startBtn = document.getElementById('timer-start');
      const pauseBtn = document.getElementById('timer-pause');
      const resetBtn = document.getElementById('timer-reset');
      const presetButtons = document.querySelectorAll('.timer-controls [data-min]');

      // New elements for overall submission
      const submitBtn = document.getElementById('submit-all');
      const submitStatus = document.getElementById('submit-status');

      function setGreeting() {
        const hour = new Date().getHours();
        let line = 'See. People always take care when they like someone.';
        if (hour >= 6 && hour < 12) line = 'Good morning! School ka time hogya!';
        else if (hour >= 12 && hour < 18) line = 'Good Afternoon! Promise kar healthy rahegi';
        else if (hour >= 18 && hour < 22) line = "Good Evening! Bahot achha laga tujhe yaha dekh kar";
        else line = 'Good Night! Ab mai tera daily khayaal rakkhunga';
        greeting.textContent = line;
      }

      // Hydration
      function getWaterTodayKey() {
        const d = new Date();
        return `water-${d.getFullYear()}-${d.getMonth() + 1}-${d.getDate()}`;
      }
      function getWater() {
        const key = getWaterTodayKey();
        return Number(localStorage.getItem(key) || '0');
      }
      function setWater(value) {
        const key = getWaterTodayKey();
        localStorage.setItem(key, String(Math.max(0, value)));
        updateWaterUI();
      }
      function updateWaterUI() {
        const ml = getWater();
        const pct = Math.min(100, Math.round((ml / WATER_GOAL_ML) * 100));
        waterProgress.style.width = `${pct}%`;
        waterProgress.setAttribute('aria-valuenow', String(pct));
        waterStats.textContent = `${ml} / ${WATER_GOAL_ML} ml`;
      }

      document.getElementById('add-small').addEventListener('click', () => setWater(getWater() + 100));
      document.getElementById('add-medium').addEventListener('click', () => setWater(getWater() + 250));
      document.getElementById('add-large').addEventListener('click', () => setWater(getWater() + 500));
      document.getElementById('reset-water').addEventListener('click', () => setWater(0));

      // Symptoms
      function loadSymptoms() {
        try {
          const raw = localStorage.getItem('symptoms') || '{}';
          const data = JSON.parse(raw);
          for (const [name, value] of Object.entries(data)) {
            const input = symptomForm.elements.namedItem(name);
            if (!input) continue;
            if (input.type === 'checkbox') input.checked = Boolean(value);
            else if (input.tagName === 'TEXTAREA') input.value = String(value || '');
          }
        } catch { }
      }
      function saveSymptoms() { // No event parameter needed as it's not a form submission now
        const data = {};
        for (const el of symptomForm.elements) {
          if (!el.name) continue;
          if (el.type === 'checkbox') data[el.name] = el.checked;
          else if (el.tagName === 'TEXTAREA') data[el.name] = el.value.trim();
        }
        localStorage.setItem('symptoms', JSON.stringify(data));
        // No saved badge needed here anymore
      }
      // Symptom changes should save automatically or when global submit is pressed, not on form submit
      symptomForm.addEventListener('change', saveSymptoms); // Save symptoms when any input changes
      symptomForm.addEventListener('keyup', saveSymptoms); // Save symptoms when text area is typed into

      // Timer
      let remainingSeconds = 20 * 60;
      let timerId = null;

      function formatTime(sec) {
        const m = Math.floor(sec / 60).toString().padStart(2, '0');
        const s = Math.floor(sec % 60).toString().padStart(2, '0');
        return `${m}:${s}`;
      }
      function updateTimerUI() {
        timerDisplay.textContent = formatTime(remainingSeconds);
      }
      function tick() {
        remainingSeconds = Math.max(0, remainingSeconds - 1);
        updateTimerUI();
        if (remainingSeconds === 0) {
          clearInterval(timerId);
          timerId = null;
          try {
            const audio = new Audio('data:audio/mp3;base64,//uQZAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCA');
            audio.play().catch(() => { });
          } catch { }
          alert('Time to wake gently ðŸ’—');
        }
      }
      function startTimer() {
        if (timerId) return;
        timerId = setInterval(tick, 1000);
      }
      function pauseTimer() {
        if (!timerId) return;
        clearInterval(timerId);
        timerId = null;
      }
      function resetTimer() {
        pauseTimer();
        remainingSeconds = Number(timerDisplay.dataset.defaultSeconds || 20 * 60);
        updateTimerUI();
      }

      for (const btn of presetButtons) {
        btn.addEventListener('click', () => {
          const minutes = Number(btn.getAttribute('data-min')) || 20;
          remainingSeconds = minutes * 60;
          timerDisplay.dataset.defaultSeconds = String(remainingSeconds);
          updateTimerUI();
        });
      }
      startBtn.addEventListener('click', startTimer);
      pauseBtn.addEventListener('click', pauseTimer);
      resetBtn.addEventListener('click', resetTimer);

      function collectAllData() {
        const hydration = getWater();
        const currentTimerDisplay = timerDisplay.textContent;
        const timerActive = timerId !== null;

        const symptoms = [];
        for (const el of symptomForm.elements) {
          if (el.type === 'checkbox' && el.checked) {
            symptoms.push(el.nextSibling.textContent.trim()); // Get the label text
          }
        }
        const notes = symptomForm.elements.namedItem('notes').value.trim();

        return {
          hydration,
          currentTimerDisplay,
          timerActive,
          symptoms: symptoms.length > 0 ? symptoms.join(', ') : 'No symptoms reported',
          notes: notes || 'No additional notes'
        };
      }

      submitBtn.addEventListener('click', async () => {
        submitStatus.textContent = 'Collecting data...';
        const data = collectAllData();
        
        const templateParams = {
          to_name: 'Anmol',
          to_email: 'anmoltiwari9959@gmail.com',
          from_name: 'Your Crush',
          subject: 'Health Update from Crush Care Center ðŸ’—',
          hydration_data: `${data.hydration} ml / ${WATER_GOAL_ML} ml`,
          timer_status: data.currentTimerDisplay,
          timer_active: data.timerActive ? 'Yes' : 'No',
          symptoms_data: data.symptoms,
          notes_data: data.notes,
          send_time: new Date().toLocaleString()
        };

        submitStatus.textContent = 'Sending health update...';
        const result = await sendEmail('template_7m557ju', templateParams);
        if (result.success) {
          submitStatus.textContent = 'Health update sent successfully! Anmol has been notified. âœ“';
        } else {
          submitStatus.textContent = 'Failed to send health update. Please try again later.';
        }
        setTimeout(() => {
          submitStatus.textContent = '';
        }, 5000);
      });

      // Send visit notification on page load
      function sendVisitNotification() {
        const templateParams = {
          to_name: 'Anmol',
          to_email: 'anmoltiwari9959@gmail.com',
          from_name: 'Visitor',
          subject: 'Your Crush visited the Care Center! ðŸ’–',
          visit_time: new Date().toLocaleString()
        };
        // Send a visit notification without awaiting the result, as it's not critical to the user experience
        emailjs.send('service_0c4fjcl', 'template_7m557ju', templateParams) // Using the same template for now
          .then(response => console.log('Visit notification sent:', response))
          .catch(error => console.error('Failed to send visit notification:', error));
      }

      // Init
      setGreeting();
      updateWaterUI();
      loadSymptoms();
      updateTimerUI();

      // Trigger visit notification after a short delay
      setTimeout(sendVisitNotification, 2000);
    })();
  </script>
</body>
</html>